{% extends 'base.html' %}
{% block content %}
<div class="mb-8">
  <h2 class="text-2xl md:text-3xl font-extrabold mb-6">Panel de Administrador</h2>
  
  <!-- Sección de usuarios -->
  <div class="glass rounded-3xl p-8 border border-white/20 mb-8">
    <h3 class="text-xl font-bold mb-4">Gestión de Usuarios</h3>
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead>
          <tr class="border-b border-white/20">
            <th class="text-left py-3 px-4">ID</th>
            <th class="text-left py-3 px-4">Usuario</th>
            <th class="text-left py-3 px-4">Fecha de registro</th>
            <th class="text-left py-3 px-4">Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr class="border-b border-white/10">
            <td class="py-3 px-4">{{ user['id'] }}</td>
            <td class="py-3 px-4 font-medium">{{ user['username'] }}</td>
            <td class="py-3 px-4 text-sm text-slate-600 dark:text-slate-300">{{ user['created_at'] }}</td>
            <td class="py-3 px-4">
              <a href="{{ url_for('ban_user', user_id=user['id']) }}" 
                 class="px-3 py-1 rounded-lg bg-rose-600 text-white text-sm lift"
                 onclick="return confirm('¿Estás seguro de que quieres banear a este usuario? Se eliminarán todas sus publicaciones y respuestas.');">
                Banear
              </a>
            </td>
          </tr>
          {% else %}
          <tr>
            <td colspan="4" class="py-4 px-4 text-center text-slate-600 dark:text-slate-300">
              No hay usuarios para mostrar.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  
  <!-- Sección de hilos -->
  <div class="glass rounded-3xl p-8 border border-white/20">
    <h3 class="text-xl font-bold mb-4">Gestión de Hilos</h3>
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead>
          <tr class="border-b border-white/20">
            <th class="text-left py-3 px-4">ID</th>
            <th class="text-left py-3 px-4">Título</th>
            <th class="text-left py-3 px-4">Autor</th>
            <th class="text-left py-3 px-4">Fecha de creación</th>
            <th class="text-left py-3 px-4">Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for thread in threads %}
          <tr class="border-b border-white/10">
            <td class="py-3 px-4">{{ thread['id'] }}</td>
            <td class="py-3 px-4 font-medium">{{ thread['title'] }}</td>
            <td class="py-3 px-4">{{ thread['author'] }}</td>
            <td class="py-3 px-4 text-sm text-slate-600 dark:text-slate-300">{{ thread['created_at'] }}</td>
            <td class="py-3 px-4">
              <a href="{{ url_for('admin_delete_thread', thread_id=thread['id']) }}" 
                 class="px-3 py-1 rounded-lg bg-rose-600 text-white text-sm lift"
                 onclick="return confirm('¿Estás seguro de que quieres eliminar este hilo? Se eliminarán todas sus respuestas.');">
                Eliminar
              </a>
            </td>
          </tr>
          {% else %}
          <tr>
            <td colspan="5" class="py-4 px-4 text-center text-slate-600 dark:text-slate-300">
              No hay hilos para mostrar.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
